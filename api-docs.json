{"openapi":"3.0.1","info":{"title":"API for Parcel Delivery App","description":"Entrypoint that combines APIs from underlying microservices. The Gateway API contains methods related to authentication, orders, and delivery.\n","contact":{"name":"Igor Shmagrinskiy","email":"unrealwork@gmail.com"},"license":{"name":"MIT License","url":"https://github.com/unrealwork/parcel-delivery-app/blob/main/LICENSE"},"version":"0.0.1"},"externalDocs":{"description":"PDA API Docs","url":"https://unrealwork.github.io/parcel-delivery-app"},"servers":[{"url":"http://localhost:18080","description":"Generated server url"}],"security":[{"jwt":[]}],"tags":[{"name":"Courier","description":"Contains endpoints related to couriers in delivery service"},{"name":"Delivery","description":"Endpoints related to delivery of orders"},{"name":"Authentication","description":"Endpoints related to user authentication"},{"name":"Order","description":"Endpoints related to users' orders"}],"paths":{"/api/deliveries/{orderId}/assign":{"put":{"tags":["Delivery"],"summary":"Assign courier","description":"<b>Required privilege:</b> <code>ASSIGN_COURIER</code><br/><br/>Allows to assign a courier user\n","operationId":"assign","parameters":[{"name":"orderId","in":"path","description":"Unique identifier of the order.\n","required":true,"style":"simple","explode":false,"schema":{"type":"string","format":"uuid"},"example":"4843a6c6-28e7-4a85-8f8d-f7e343389350"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Assign courier request"}}},"required":true},"responses":{"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"404":{"description":"Not Found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"default":{"description":"default response"}}}},"/api/deliveries/{orderId}":{"get":{"tags":["Delivery"],"summary":"View details","description":"<b>Required privilege:</b> <code>VIEW_DELIVERY_DETAILS</code><br/><br/>Retrieve information about delivery of the order. Behaviour is user role based:\n<ul><li>User: own created orders</li>\n<li>Courier: orders assigned to him</li></ul>\n","operationId":"delivery","parameters":[{"name":"orderId","in":"path","description":"Unique identifier of the order.\n","required":true,"style":"simple","explode":false,"schema":{"type":"string","format":"uuid"},"example":"4843a6c6-28e7-4a85-8f8d-f7e343389350"}],"responses":{"403":{"description":"In case if order is not accessible for a user"},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"404":{"description":"In case if delivery for orderId is not found"},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Delivery description"}}}}}}},"/api/deliveries/{orderId}/track":{"get":{"tags":["Delivery"],"summary":"Track","description":"<b>Required privilege:</b> <code>TRACK_DELIVERY</code><br/><br/>Retrieves information about current location of the order\n","operationId":"track","parameters":[{"name":"orderId","in":"path","description":"Unique identifier of the order.\n","required":true,"style":"simple","explode":false,"schema":{"type":"string","format":"uuid"},"example":"4843a6c6-28e7-4a85-8f8d-f7e343389350"}],"responses":{"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"404":{"description":"Not Found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Location coordinates"}}}}}}},"/api/couriers":{"get":{"tags":["Courier"],"summary":"List of couriers ","description":"<b>Required privilege:</b> <code>VIEW_COURIERS</code><br/><br/>Retrieves list of couriers with their statuses availability statuses\n","operationId":"couriers","responses":{"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"404":{"description":"Not Found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Courier description"}}}}}}}},"/api/auth/signup":{"post":{"tags":["Authentication"],"summary":"Create a user account","description":"Provide data required for the registration process of a user of the app","operationId":"signup","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Sign up request"}}},"required":true},"responses":{"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"404":{"description":"Not Found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"204":{"description":"Successful registration"}},"security":[]}},"/api/auth/signup/courier":{"post":{"tags":["Authentication"],"summary":"Create a courier account","description":"<b>Required privilege:</b> <code>CREATE_COURIER_USER</code><br/><br/>Creates courier account with provided registration data","operationId":"courierSignup","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Sign up request"}}},"required":true},"responses":{"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"404":{"description":"Not Found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"204":{"description":"Successful courier account creation"}}}},"/api/auth/signin":{"post":{"tags":["Authentication"],"summary":"Sign in","description":"Retrieve access token using user's credentials. Single entrypoint for all types of accounts.","operationId":"signin","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Sign in request"}}},"required":true},"responses":{"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"404":{"description":"Not Found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Access data"}}}}},"security":[]}},"/api/auth/me":{"get":{"tags":["Authentication"],"summary":"Retrieve authorization data","description":"Describes authorization data containing in provided JWT token","operationId":"me","responses":{"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"404":{"description":"Not Found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Authorization data"}}}}}}},"/api/orders/{id}/status":{"put":{"tags":["Order"],"summary":"Change status","description":"<b>Required privilege:</b> <code>CHANGE_ORDER_STATUS</code><br/><br/>Allows to change an order's status.<br/>\n<ul>\n<li>Admin - any of statuses</li>\n<li>Courier - can change from PENDING -> IN_PROGRESS and IN_PROGRESS -> DELIVERED</li>\n</ul>\n","operationId":"changeStatus","parameters":[{"name":"id","in":"path","description":"Unique identifier of the order.\n","required":true,"style":"simple","explode":false,"schema":{"type":"string","format":"uuid"},"example":"4843a6c6-28e7-4a85-8f8d-f7e343389350"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Change order's status request"}}},"required":true},"responses":{"404":{"description":"Not Found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"204":{"description":"In case of successful modification"}}}},"/api/orders/{id}/destination":{"put":{"tags":["Order"],"summary":"Change destination","description":"<b>Required privilege:</b> <code>CHANGE_DESTINATION</code><br/><br/>Allows to change an order's destination of own orders. Destination can be changed before moment when delivery is started.\n","operationId":"destination","parameters":[{"name":"id","in":"path","description":"Unique identifier of the order.\n","required":true,"style":"simple","explode":false,"schema":{"type":"string","format":"uuid"},"example":"4843a6c6-28e7-4a85-8f8d-f7e343389350"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Change order's destination request"}}},"required":true},"responses":{"404":{"description":"Not Found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"403":{"description":"In case of modification of someone's else order"},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"204":{"description":"In case of successful modification"}}}},"/api/orders/{id}/cancel":{"put":{"tags":["Order"],"summary":"Cancel","description":"<b>Required privilege:</b> <code>CANCEL_ORDER</code><br/><br/>Allows users to cancel their own orders. If order is already IN_PROGRESS cancellation is not possible.","operationId":"cancel","parameters":[{"name":"id","in":"path","description":"Unique identifier of the order.\n","required":true,"style":"simple","explode":false,"schema":{"type":"string","format":"uuid"},"example":"4843a6c6-28e7-4a85-8f8d-f7e343389350"}],"responses":{"404":{"description":"In case of non existing  order"},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"403":{"description":"In case of cancellation of someone's else order"},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"204":{"description":"In case of successful cancellation"}}}},"/api/orders":{"get":{"tags":["Order"],"summary":"View","description":"<b>Required privilege:</b> <code>VIEW_ORDERS</code><br/><br/>Retrieve information of orders accessible for an account depends on role.\n<ul><li>User: own created orders</li>\n<li>Admin: all orders</li>\n<li>Courier: orders assigned to him</li></ul>\n","operationId":"orders","responses":{"404":{"description":"Not Found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Order description"}}}}}}},"post":{"tags":["Order"],"summary":"Create","description":"<b>Required privilege:</b> <code>CREATE_ORDER</code><br/><br/>Allows users create users a new order.","operationId":"create","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Create order request"}}},"required":true},"responses":{"404":{"description":"Not Found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error response"}}}},"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Order description"}}}}}}}},"components":{"schemas":{"Error response":{"type":"object","properties":{"code":{"type":"integer","description":"Code of the error. Usually corresponds to Http Status code","format":"int32","example":403},"message":{"type":"string","description":"Describes reason of the error","example":"Access denied to the API endpoint without VIEW_COURIERS privilege"}},"description":"Contain details of a error happened during request","readOnly":true},"Assign courier request":{"required":["courierId"],"type":"object","properties":{"courierId":{"type":"string","description":"Unique identifier of courier's user","example":"jack@doe.com"}},"description":"Performs assignment of a delivery to courier","writeOnly":true},"Delivery description":{"required":["orderedBy","status"],"type":"object","properties":{"orderId":{"type":"string","description":"Unique order identifier, unique for each delivery as well","format":"uuid","example":"4843a6c6-28e7-4a85-8f8d-f7e343389350"},"orderedBy":{"type":"string"},"longitude":{"maximum":180.0,"exclusiveMaximum":true,"minimum":-180.0,"exclusiveMinimum":false,"type":"number","description":"Longitude of a coordinates of delivery's location","example":51.523788},"latitude":{"maximum":90.0,"exclusiveMaximum":false,"minimum":-90.0,"exclusiveMinimum":false,"type":"number","description":"Latitude of a coordinates of delivery's location","example":-0.158611},"status":{"type":"string","description":"Status of a delivery process","example":"INITIAL","enum":["INITIAL","IN_PROGRESS","COMPLETED"]},"createdAt":{"type":"string","description":"Datetime when the delivery details was added\n","format":"date-time","example":"2023-03-23T18:35:05.785Z"},"updatedAt":{"type":"string","description":"Datetime when the delivery details were modified last time\n","format":"date-time","example":"2023-03-23T18:35:05.785Z"}},"description":"Contains details about delivery of an order","readOnly":true},"Location coordinates":{"type":"object","properties":{"longitude":{"type":"number","description":"Longitude of the coordinates","example":51.523788},"latitude":{"type":"number","description":"Latitude of the coordinates","example":-0.158611}},"description":"Describes a location coordinates","readOnly":true},"Courier description":{"required":["status"],"type":"object","properties":{"userId":{"type":"string","description":"Unique identifier of courier. Usually email","example":"jack@doe.com"},"status":{"type":"string","enum":["AVAILABLE","UNAVAILABLE"]},"createdAt":{"type":"string","description":"Datetime when the courier details was added\n","format":"date-time","example":"2023-03-23T18:35:05.785Z"},"updatedAt":{"type":"string","description":"Datetime when the courier details was modified last time\n","format":"date-time","example":"2023-03-23T18:35:05.785Z"}},"description":"Contain details about courier related to delivery process.\n","readOnly":true},"Sign up request":{"required":["clientId","firstName","lastName","phone"],"type":"object","properties":{"clientId":{"type":"string","description":"Email of the user","example":"john@doe.com"},"firstName":{"type":"string","description":"First Name of the user","example":"John"},"lastName":{"type":"string","description":"Last Name of the user","example":"Doe"},"phone":{"type":"string","description":"Phone number of the user.","example":"+12312435678"},"password":{"maximum":20,"minimum":8,"type":"string","description":"Password for signing in in the app","example":"password123"}},"description":"Request for registration in the app","writeOnly":true},"Sign in request":{"required":["clientId"],"type":"object","properties":{"clientId":{"type":"string","description":"Email of the user specified during registration or provided by administrator","example":"john@doe.com"},"secretKey":{"type":"string","description":"Password of the user specified during registration or provided by administrator","example":"password123"}},"description":"Data required for signing in the app","writeOnly":true},"Access data":{"type":"object","properties":{"accessToken":{"type":"string","description":"JWT token for accessing other resources of API. Should be specified as bearer token in Authorization HTTP header."}},"description":"Data to access other API resources.","readOnly":true},"Authorization data":{"required":["role"],"type":"object","properties":{"clientId":{"type":"string","description":"Email of the authenticated user","example":"john@doe.com"},"role":{"type":"string","description":"Role of the user in the app","example":"ADMIN","enum":["USER","ADMIN","COURIER","SUPERUSER"]},"privileges":{"uniqueItems":true,"type":"array","items":{"type":"string","description":"Privilege of the user","example":"CREATE_ORDER","enum":["BASIC","CREATE_COURIER_USER","VIEW_ORDERS","CREATE_ORDER","CHANGE_ORDER_STATUS","CANCEL_ORDER","CHANGE_DESTINATION","VIEW_DELIVERY_DETAILS","ASSIGN_COURIER","VIEW_COURIERS","TRACK_DELIVERY"]}}},"description":"Contains authorization data from provided JWT token"},"Change order's status request":{"required":["status"],"type":"object","properties":{"status":{"type":"string","description":"New status of the order","example":"ACCEPTED","enum":["INITIAL","ACCEPTED","PENDING","IN_PROGRESS","DELIVERED","CANCELLED"]}},"description":"Allows to change order's status","writeOnly":true},"Change order's destination request":{"required":["destination"],"type":"object","properties":{"destination":{"type":"string","description":"New destination of the order","example":"20 W 34th St., New York, NY 10001, USA"}},"description":"Data required for changing destination of the order","writeOnly":true},"Create order request":{"required":["description","destination","weight"],"type":"object","properties":{"description":{"type":"string","description":"Some additional notes for consideration","example":"Call 15 minute before"},"destination":{"type":"string","description":"Destination of the order. Address of a location.\n","example":"221b Baker St, London NW1 6XE, United Kingdom"},"weight":{"maximum":100.0,"exclusiveMaximum":false,"minimum":0.0,"exclusiveMinimum":false,"type":"number","description":"Weight of a parcel in kg. Allowed fractional digit count 3.\n","example":1.22}},"description":"Data that should be provided for order creation","writeOnly":true},"Order description":{"required":["createdBy","description","destination","status"],"type":"object","properties":{"id":{"type":"string","description":"Unique identifier of the order\n","format":"uuid","example":"4843a6c6-28e7-4a85-8f8d-f7e343389350"},"description":{"type":"string","description":"Some additional notes about the order\n","example":"Call 15 minutes before"},"weight":{"maximum":100.0,"exclusiveMaximum":false,"minimum":0.0,"exclusiveMinimum":false,"type":"number","description":"Weight of a parcel in kg. Allowed fractional digit count 3.\n","example":1.22},"status":{"type":"string","description":"Status of the order\n","example":"ACCEPTED","enum":["INITIAL","ACCEPTED","PENDING","IN_PROGRESS","DELIVERED","CANCELLED"]},"createdBy":{"type":"string","description":"Email of the user that created the order\n","example":"john@doe.com"},"assignedTo":{"type":"string","description":"Email of the courier who was assigned to deliver the order\n","example":"jack@doe.com"},"destination":{"type":"string","description":"Destination of the order. Address of a location.\n","example":"221b Baker St, London NW1 6XE, United Kingdom"},"createdAt":{"type":"string","description":"Datetime when the order was created\n","format":"date-time","example":"2023-03-23T18:35:05.785Z"},"updatedAt":{"type":"string","description":"Datetime when the order was updated\n","format":"date-time","example":"2023-03-23T18:35:05.785Z"}},"description":"Describes user's order","readOnly":true}},"securitySchemes":{"jwt":{"type":"http","description":"Authentication and authorization in the app are organized using JWT tokens.\n","scheme":"bearer","bearerFormat":"JWT"}}}}